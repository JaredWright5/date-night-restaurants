<!DOCTYPE html>
<html>
<head>
    <title>Test Featured Section</title>
</head>
<body>
    <h1>Test Featured Section</h1>
    
    <div>
        <h2>Step 1: Set Featured Restaurants</h2>
        <button onclick="setFeatured()">Set Featured Restaurants</button>
        <div id="set-status"></div>
    </div>
    
    <div>
        <h2>Step 2: Test API</h2>
        <button onclick="testAPI()">Test API</button>
        <div id="api-status"></div>
    </div>
    
    <div>
        <h2>Step 3: Go to Home Page</h2>
        <a href="http://localhost:4321/" target="_blank">Open Home Page</a>
    </div>
    
    <script>
        function setFeatured() {
            const featuredSlugs = [
                'felix-trattoria',
                'gjelina-on-abbot-kinney', 
                'fishing-with-dynamite',
                'bavel'
            ];
            
            localStorage.setItem('featuredRestaurants', JSON.stringify(featuredSlugs));
            document.getElementById('set-status').innerHTML = '<p style="color: green;">✅ Featured restaurants set: ' + featuredSlugs.join(', ') + '</p>';
        }
        
        async function testAPI() {
            try {
                const response = await fetch('/api/restaurants');
                const data = await response.json();
                
                if (data.error) {
                    document.getElementById('api-status').innerHTML = '<p style="color: red;">❌ API Error: ' + data.error + '</p>';
                    return;
                }
                
                const restaurantCount = data.restaurants ? data.restaurants.length : 0;
                document.getElementById('api-status').innerHTML = '<p style="color: green;">✅ API working - ' + restaurantCount + ' restaurants loaded</p>';
                
            } catch (error) {
                document.getElementById('api-status').innerHTML = '<p style="color: red;">❌ API Error: ' + error.message + '</p>';
            }
        }
    </script>
</body>
</html>
