---
import BaseLayout from '@/layouts/BaseLayout.astro';

// This page handles query parameter redirects using client-side JavaScript
// since Astro cannot reliably parse query parameters in server-side rendering
---
<BaseLayout
  title="Redirecting..."
  description="Redirecting to the correct page..."
  noIndex={true}
>
  <main style="padding: 4rem 2rem; text-align: center;">
    <h1>Redirecting...</h1>
    <p>Please wait while we redirect you to the correct page.</p>
  </main>
</BaseLayout>

<script>
  // Handle query parameter redirects on the client side
  (function() {
    const urlParams = new URLSearchParams(window.location.search);
    const neighborhood = urlParams.get('neighborhood');
    
    if (neighborhood && neighborhood.trim() !== '') {
      // Convert neighborhood name to slug format and redirect to clean URL
      const neighborhoodSlug = neighborhood.toLowerCase().replace(/\s+/g, '-');
      console.log('Redirecting to:', `/losangeles/restaurants/${neighborhoodSlug}/`);
      window.location.replace(`/losangeles/restaurants/${neighborhoodSlug}/`);
    } else {
      // No neighborhood filter, redirect to main restaurants page
      console.log('Redirecting to main restaurants page');
      window.location.replace('/restaurants/');
    }
  })();
</script>